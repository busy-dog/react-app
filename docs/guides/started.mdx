---
title: 开始
sidebar_position: 1
---

# 开始

## 介绍

Mango React App 是个人开源的 React SPA 脚手架模板，它把【可维护性】作为首要目标，以相互学习和交流为目的。

## 环境准备

### Node.js

在开始使用前，你需要安装 [Node.js](https://nodejs.org/)，并保证 Node.js 版本不低于 18（**我们推荐使用 Node.js 20 的 LTS 版本**），你可以通过`node -v`检查当前使用的 Node.js 版本。


如果你当前的环境中尚未安装 Node.js，或是安装的版本低于 18，可以通过 [fnm](https://github.com/Schniz/fnm) 安装需要的版本。下面是通过 fnm 安装 Node.js 20 LTS 版本的例子：

<img src="/fnm.svg" alt="Blazing fast!"/>

:::tip nvm 和 fnm
nvm 和 fnm 都是 Node.js 版本管理工具。相对来说，nvm 较为成熟和稳定，而 fnm 是使用 Rust 实现的，比 nvm 提供了更好的性能。
:::

此外，在安装 fnm 后，然后只要仓库根目录下有内容为 `lts/hydrogen` 的 `.nvmrc` 文件，进入这个仓库时就会自动安装或切换到正确的 Node.js 版本。

### pnpm

脚手架使用 [pnpm](https://pnpm.io/installation) 来管理依赖：`npm install -g pnpm@8`。

## 初始化项目

可在项目的目录下运行以下命令。

```bash pure
pnpm dev              # 启动开发服务器
pnpm build -e prod    # 构建生产环境产物
pnpm docs:dev         # 启动文档开发服务器
```

现在，项目结构如下：

```
.
├── node_modules
├── src
│   └── pages
│       ├── index.css
│       ├── index.tsx
├── package.json
├── pnpm-lock.yaml
├── README.md
└── tsconfig.json
```

## 启动项目

在项目中执行 `pnpm dev` 即可启动项目：

```bash pure
> tsx watch ./scripts/@dev.server.ts

<i> [webpack-dev-server] Loopback: http://localhost:8080/
<i> [webpack-dev-server] On Your Network (IPv4): http://10.*.*.*:8080/
<i> [webpack-dev-server] On Your Network (IPv6): http://[fe80::1]:8080/
<i> [webpack-dev-server] Content not from webpack is served from '/**/react-app/assets' directory
<i> [webpack-dev-server] 404s will fallback to '/index.html'
●  ━━━━━━━━━━━━━━━━━━━━━━━━━ (100%) emitting after emit                                                                                                                                  Rspack compiled successfully
Type-checking in progress...
No errors found.
```

在浏览器中打开 `http://localhost:8000/`，可以看到页面内容。

## 构建项目

在项目中执行 `pnpm build -e prod` 即可构建项目生产环境产物：

```bash pure
> tsx ./scripts/@caniuse.ts

<i> [caniuse] Generated caniuse successfully
<i> [webpack] 2024-09-27 11:18:17 Start build single page application
●  ━━━━━━━━━━━━━━━━━━━━━━━━━ (100%) emitting after emit                                                                                                                                  
<i> [webpack] 2024-09-27 11:18:20 Single page application success to build with 3s
```

构建产物默认生成到 `dist/`，目录结构如下：

```
dist
├── static
│   ├── {version.hash}
│   ├── *.css
│   ├── *.js
│   ├── main.css
│   ├── main.js
│   ├── manifest.js
│   └── runtime.js
├── themes
├── favicon.svg
└── index.html
```

{/* ## 本地验证

在项目中执行 `pnpm run serve` 即可在本地验证构建产物是否正常运行：

```bash
$ pnpm run serve

  Modern.js Framework

info    Starting production server...

  > Local:    http://localhost:8080/
  > Network:  http://192.168.0.1:8080/
```

在浏览器中打开 `http://localhost:8000/`，内容应该和 `pnpm run dev` 时一致。 */}

{/* ## 部署

本地验证完成后，可以参考 [部署](/guides/basic-features/deploy.html) 一节，将项目部署到服务器上。 */}

## 技术栈

接下来，你可以了解到脚手架涉及的主要技术栈，以及一些可选的库和工具。

### UI库

脚手架使用 [React 18](https://react.dev/) 来构建用户界面。

### 路由

脚手架路由基于 [React Router V6](https://reactrouter.com/en/main)，支持约定式路由、自控式路由。

### 状态

脚手架使用 [Zustand](https://docs.pmnd.rs/zustand) 搭配 [ReactQuery](https://tanstack.com/query/latest/docs/framework/react/overview) 管理应用状态。

### 编译

脚手架使用 [Rspack](https://www.rspack.dev/) 来打包你的 Web 应用。

### 转译

脚手架使用 [SWC](https://swc.rs/) 作为 JS 转译工具，将 TypeScript 或 JSX 转义为可以在浏览器上运行的 JavaScript 代码，并进行语法降级。

### 压缩

在生产环境构建时，脚手架使用 [SWC](https://swc.rs/) 来压缩 JavaScript 代码，使用 [cssnano](https://cssnano.co/) 来压缩 CSS 代码。

### CSS 预处理器

脚手架目前只支持 [Sass](https://sass-lang.com/) 一种 CSS 预处理器。

### CSS Modules

Modern.js 对 [CSS Modules](https://github.com/css-modules/css-modules) 提供了开箱即用的支持，内部基于 [css-loader](https://www.npmjs.com/package/css-loader) 实现。

请参考 [使用 CSS Modules](/guides/basic-features/css/css-modules) 来使用。

### 组件库

脚手架内置 UI 组件以便开发自定义 UI。

脚手架可以与社区中任意的 React 组件库搭配使用，比如 [MUI](https://mui.com/)、[Ant Design](https://ant.design/)、[Arco Design](https://github.com/arco-design/arco-design)、[Semi Design](https://semi.design/)、[Radix UI](https://www.radix-ui.com/) 等。
